name: Metal Price Update

on:
  schedule:
    - cron: "*/30 * * * *"   # ⏰ Every 30 minutes
  workflow_dispatch:        # ▶ Manual trigger

jobs:
  update:
    runs-on: ubuntu-latest

    steps:
      - name: Call Metal Fetch API
        run: |
          curl -X POST https://ruveri-admin.vercel.app/api/metals/fetch \
          -H "x-api-key: ${NEXT_PUBLIC_API_KEY}"
        env:
          API_KEY: ${{ secrets.NEXT_PUBLIC_API_KEY }}
